---
type: "manual"
---

# 開發流程規則

## 🎯 核心原則
**本地開發優先，減少不必要的部署成本**

## 📋 開發流程

### 1. 本地開發階段
- 所有新功能都在本地環境開發和測試
- 使用 `npm run dev` 啟動本地開發伺服器
- 連接到 Supabase 雲端開發環境（已配置）
- 確保功能完整且無明顯錯誤

### 2. 本地測試檢查清單
在提交代碼前，必須確認：
- [ ] 功能正常運作
- [ ] 沒有 TypeScript 錯誤 (`npm run build`)
- [ ] 沒有 ESLint 警告 (`npm run lint`)
- [ ] 資料庫操作正常（CRUD 測試）
- [ ] RLS 權限正確
- [ ] UI/UX 符合預期
- [ ] 響應式設計正常（手機/平板/桌面）

### 3. Git 提交策略
- 功能開發完成後才提交
- 使用有意義的 commit message
- 可以多次本地 commit，但不急著 push

### 4. 部署時機
**只在以下情況部署到生產環境：**
- ✅ 重要功能完成且經過完整測試
- ✅ 修復關鍵 bug
- ✅ 累積多個小功能後的批次部署
- ✅ 需要給真實用戶測試時

**避免的部署情況：**
- ❌ 每次小改動就部署
- ❌ 未經測試的代碼
- ❌ 實驗性功能
- ❌ 調整樣式等小修改

### 5. 部署前最終檢查
```bash
# 1. 確保本地構建成功
npm run build

# 2. 測試生產構建
npm run start

# 3. 檢查環境變數
# 確認 Vercel 上的環境變數與 .env.local 一致

# 4. 確認資料庫遷移
# 如有新的 migration，先在 Supabase Dashboard 執行
```

## 🔧 本地開發最佳實踐

### 快速測試指令
```bash
# 啟動開發伺服器
npm run dev

# 檢查 TypeScript 錯誤
npm run build

# 檢查代碼風格
npm run lint
```

### 資料庫變更流程
1. 在 Supabase Dashboard 的 SQL Editor 測試 SQL
2. 確認無誤後，建立 migration 檔案
3. 在本地測試 migration
4. 提交到 Git
5. 部署時在生產環境執行 migration

## 💰 成本控制

### Vercel 免費額度
- 每月 100GB 頻寬
- 100 小時構建時間
- 無限部署次數（但建議控制）

### Supabase 免費額度
- 500MB 資料庫空間
- 1GB 檔案儲存
- 50,000 月活躍用戶

### 建議
- 開發階段：每週部署 1-2 次
- 穩定階段：每 2-4 週部署一次
- 緊急修復：立即部署

## 📝 部署記錄

建議在每次部署時記錄：
- 部署日期
- 部署內容（新功能/修復）
- 版本號
- 是否有資料庫變更

---
type: "always_apply"
---

