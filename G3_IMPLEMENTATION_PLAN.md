# éšæ®µ G.3ï¼šç­‰ç´šå‡ç´šè§¸ç™¼ï¼ˆå‰ç«¯æ•´åˆï¼‰- å¯¦ä½œè¨ˆç•«

**ç‰ˆæœ¬**ï¼šv1.0  
**æ—¥æœŸ**ï¼š2025-10-14  
**é ä¼°æ™‚é–“**ï¼š1 å¤©ï¼ˆ8 å°æ™‚ï¼‰

---

## ğŸ“‹ ä»»å‹™æ¦‚è¦½

### ä¸»è¦ç›®æ¨™
å»ºç«‹å‰ç«¯å‡ç´šé€šçŸ¥ç³»çµ±ï¼Œè®“ä½¿ç”¨è€…åœ¨å‡ç´šæ™‚èƒ½çœ‹åˆ°ç²¾ç¾çš„å‹•ç•«å’Œæç¤ºã€‚

### å·²å®Œæˆçš„å·¥ä½œï¼ˆéšæ®µ G.2ï¼‰
- âœ… å¾Œç«¯ç­‰ç´šè¨ˆç®—é‚è¼¯ï¼ˆcalculate_member_level å‡½æ•¸ï¼‰
- âœ… è‡ªå‹•å‡ç´šè§¸ç™¼ï¼ˆåœ¨ add-points API ä¸­ï¼‰
- âœ… å‡ç´šè³‡è¨Šè¿”å›ï¼ˆlevel_up ç‰©ä»¶ï¼‰

### å¾…å®Œæˆçš„å·¥ä½œï¼ˆéšæ®µ G.3ï¼‰
- â³ å»ºç«‹å‡ç´šé€šçŸ¥çµ„ä»¶ï¼ˆLevelUpNotificationï¼‰
- â³ å»ºç«‹å‹³ç« è§£é–é€šçŸ¥çµ„ä»¶ï¼ˆBadgeUnlockNotificationï¼‰
- â³ æ•´åˆåˆ°å‰ç«¯é é¢
- â³ å¯¦ä½œå‹•ç•«æ•ˆæœ
- â³ æ¸¬è©¦é€šçŸ¥é¡¯ç¤º

---

## ğŸ¯ è©³ç´°ä»»å‹™

### ä»»å‹™ 1ï¼šå»ºç«‹å‡ç´šé€šçŸ¥çµ„ä»¶ï¼ˆ2 å°æ™‚ï¼‰

#### 1.1 å»ºç«‹ LevelUpNotification çµ„ä»¶
- **æª”æ¡ˆ**ï¼š`src/components/notifications/LevelUpNotification.tsx`
- **åŠŸèƒ½**ï¼š
  - é¡¯ç¤ºå‡ç´šå‹•ç•«
  - é¡¯ç¤ºæ–°ç­‰ç´šå’Œç¨±è™Ÿ
  - é¡¯ç¤ºé…é¡çå‹µ
  - è‡ªå‹•é—œé–‰ï¼ˆ5 ç§’å¾Œï¼‰
  - æ”¯æ´æ‰‹å‹•é—œé–‰

#### 1.2 è¨­è¨ˆè¦æ ¼
- **è¦–è¦ºæ•ˆæœ**ï¼š
  - å¾è¢å¹•ä¸­å¤®å½ˆå‡º
  - æ¼¸è®ŠèƒŒæ™¯ï¼ˆæ ¹æ“šæ–°ç­‰ç´šé¡è‰²ï¼‰
  - å…‰æšˆæ•ˆæœ
  - æ˜Ÿæ˜Ÿå‹•ç•«
  - å¹³æ»‘çš„é€²å…¥/é€€å‡ºå‹•ç•«

- **å…§å®¹**ï¼š
  ```
  ğŸ‰ æ­å–œå‡ç´šï¼
  
  LV1 åˆå…¥æ±Ÿæ¹– â†’ LV2 å¶„éœ²é ­è§’
  
  ç²å¾—çå‹µï¼š
  â€¢ æ¯æ—¥ä¸Šå‚³é…é¡ +1
  â€¢ æ¯æ—¥æŸ¥è©¢é…é¡ +2
  
  [é—œé–‰]
  ```

#### 1.3 æŠ€è¡“å¯¦ä½œ
- ä½¿ç”¨ Tailwind CSS å‹•ç•«
- ä½¿ç”¨ Framer Motionï¼ˆå¦‚æœéœ€è¦æ›´è¤‡é›œçš„å‹•ç•«ï¼‰
- ä½¿ç”¨ React Portal æ¸²æŸ“åˆ° body
- ä½¿ç”¨ Context API ç®¡ç†é€šçŸ¥ç‹€æ…‹

---

### ä»»å‹™ 2ï¼šå»ºç«‹å‹³ç« è§£é–é€šçŸ¥çµ„ä»¶ï¼ˆ2 å°æ™‚ï¼‰

#### 2.1 å»ºç«‹ BadgeUnlockNotification çµ„ä»¶
- **æª”æ¡ˆ**ï¼š`src/components/notifications/BadgeUnlockNotification.tsx`
- **åŠŸèƒ½**ï¼š
  - é¡¯ç¤ºè§£é–å‹•ç•«
  - é¡¯ç¤ºå‹³ç« åœ–ç¤ºå’Œåç¨±
  - é¡¯ç¤ºå‹³ç« æè¿°
  - æ”¯æ´å¤šå€‹å‹³ç« åŒæ™‚è§£é–
  - è‡ªå‹•é—œé–‰ï¼ˆ5 ç§’å¾Œï¼‰
  - æ”¯æ´æ‰‹å‹•é—œé–‰

#### 2.2 è¨­è¨ˆè¦æ ¼
- **è¦–è¦ºæ•ˆæœ**ï¼š
  - å¾è¢å¹•å³ä¸Šè§’æ»‘å…¥
  - å‹³ç« åœ–ç¤ºæ—‹è½‰é€²å…¥
  - å…‰æšˆæ•ˆæœ
  - æ ¹æ“šå‹³ç« é›£åº¦é¡¯ç¤ºä¸åŒé¡è‰²

- **å…§å®¹**ï¼š
  ```
  ğŸ… è§£é–æ–°å‹³ç« ï¼
  
  [å‹³ç« åœ–ç¤º] é¦–æ¬¡ä¸Šå‚³
  
  ä¸Šå‚³ç¬¬ä¸€ç­†å‚µå‹™è³‡æ–™
  
  [é—œé–‰]
  ```

---

### ä»»å‹™ 3ï¼šå»ºç«‹é€šçŸ¥ç®¡ç†ç³»çµ±ï¼ˆ1.5 å°æ™‚ï¼‰

#### 3.1 å»ºç«‹ NotificationContext
- **æª”æ¡ˆ**ï¼š`src/contexts/NotificationContext.tsx`
- **åŠŸèƒ½**ï¼š
  - ç®¡ç†æ‰€æœ‰é€šçŸ¥çš„ç‹€æ…‹
  - æä¾›é¡¯ç¤ºé€šçŸ¥çš„æ–¹æ³•
  - æä¾›é—œé–‰é€šçŸ¥çš„æ–¹æ³•
  - æ”¯æ´é€šçŸ¥ä½‡åˆ—

#### 3.2 å»ºç«‹ NotificationProvider
- **æª”æ¡ˆ**ï¼š`src/providers/NotificationProvider.tsx`
- **åŠŸèƒ½**ï¼š
  - åŒ…è£æ•´å€‹æ‡‰ç”¨
  - æ¸²æŸ“é€šçŸ¥çµ„ä»¶
  - ç®¡ç†é€šçŸ¥ç”Ÿå‘½é€±æœŸ

---

### ä»»å‹™ 4ï¼šæ•´åˆåˆ°ç¾æœ‰é é¢ï¼ˆ1.5 å°æ™‚ï¼‰

#### 4.1 æ•´åˆåˆ°ä¸Šå‚³é é¢
- **æª”æ¡ˆ**ï¼š`src/app/(member)/upload/page.tsx`
- **ä¿®æ”¹**ï¼š
  - ä¸Šå‚³æˆåŠŸå¾Œæª¢æŸ¥ API å›æ‡‰ä¸­çš„ level_up å’Œ new_badges
  - å¦‚æœæœ‰å‡ç´šï¼Œé¡¯ç¤ºå‡ç´šé€šçŸ¥
  - å¦‚æœæœ‰æ–°å‹³ç« ï¼Œé¡¯ç¤ºå‹³ç« é€šçŸ¥

#### 4.2 æ•´åˆåˆ°æŸ¥è©¢é é¢
- **æª”æ¡ˆ**ï¼š`src/app/(member)/search/page.tsx`
- **ä¿®æ”¹**ï¼š
  - æŸ¥è©¢æˆåŠŸå¾Œæª¢æŸ¥ API å›æ‡‰ä¸­çš„ level_up å’Œ new_badges
  - å¦‚æœæœ‰å‡ç´šï¼Œé¡¯ç¤ºå‡ç´šé€šçŸ¥
  - å¦‚æœæœ‰æ–°å‹³ç« ï¼Œé¡¯ç¤ºå‹³ç« é€šçŸ¥

#### 4.3 æ•´åˆåˆ°ç™»å…¥é é¢
- **æª”æ¡ˆ**ï¼š`src/app/login/page.tsx`
- **ä¿®æ”¹**ï¼š
  - ç™»å…¥æˆåŠŸå¾Œæª¢æŸ¥æ˜¯å¦æœ‰å‡ç´šæˆ–æ–°å‹³ç« 
  - é¡¯ç¤ºç›¸æ‡‰çš„é€šçŸ¥

---

### ä»»å‹™ 5ï¼šå¯¦ä½œå‹•ç•«æ•ˆæœï¼ˆ1.5 å°æ™‚ï¼‰

#### 5.1 å‡ç´šå‹•ç•«
- å½ˆå‡ºå‹•ç•«ï¼ˆscale + opacityï¼‰
- æ˜Ÿæ˜Ÿé£›æ•£å‹•ç•«
- æ–‡å­—æ¼¸è®Šå‹•ç•«
- é€€å‡ºå‹•ç•«

#### 5.2 å‹³ç« è§£é–å‹•ç•«
- æ»‘å…¥å‹•ç•«ï¼ˆtranslateX + opacityï¼‰
- å‹³ç« æ—‹è½‰å‹•ç•«
- å…‰æšˆè„ˆå‹•å‹•ç•«
- é€€å‡ºå‹•ç•«

#### 5.3 CSS å‹•ç•«å®šç¾©
- **æª”æ¡ˆ**ï¼š`src/styles/animations.css`
- **å…§å®¹**ï¼š
  - @keyframes å®šç¾©
  - å‹•ç•«é¡åˆ¥
  - éæ¸¡æ•ˆæœ

---

### ä»»å‹™ 6ï¼šæ¸¬è©¦èˆ‡å„ªåŒ–ï¼ˆ1.5 å°æ™‚ï¼‰

#### 6.1 åŠŸèƒ½æ¸¬è©¦
- âœ… å‡ç´šé€šçŸ¥æ­£ç¢ºé¡¯ç¤º
- âœ… å‹³ç« é€šçŸ¥æ­£ç¢ºé¡¯ç¤º
- âœ… å¤šå€‹é€šçŸ¥åŒæ™‚é¡¯ç¤º
- âœ… è‡ªå‹•é—œé–‰åŠŸèƒ½
- âœ… æ‰‹å‹•é—œé–‰åŠŸèƒ½
- âœ… å‹•ç•«æµæš¢

#### 6.2 è¦–è¦ºæ¸¬è©¦
- âœ… åœ¨ä¸åŒè¢å¹•å°ºå¯¸ä¸‹é¡¯ç¤ºæ­£å¸¸
- âœ… åœ¨ä¸åŒç€è¦½å™¨ä¸‹é¡¯ç¤ºæ­£å¸¸
- âœ… å‹•ç•«æ•ˆæœç¬¦åˆè¨­è¨ˆ
- âœ… é¡è‰²å’Œå­—é«”æ­£ç¢º

#### 6.3 æ•ˆèƒ½æ¸¬è©¦
- âœ… å‹•ç•«ä¸å¡é “
- âœ… è¨˜æ†¶é«”ä½¿ç”¨æ­£å¸¸
- âœ… ä¸å½±éŸ¿å…¶ä»–åŠŸèƒ½

---

## ğŸ“ æª”æ¡ˆçµæ§‹

```
src/
â”œâ”€â”€ components/
â”‚   â””â”€â”€ notifications/
â”‚       â”œâ”€â”€ LevelUpNotification.tsx          # å‡ç´šé€šçŸ¥çµ„ä»¶
â”‚       â”œâ”€â”€ BadgeUnlockNotification.tsx      # å‹³ç« è§£é–é€šçŸ¥çµ„ä»¶
â”‚       â””â”€â”€ NotificationContainer.tsx        # é€šçŸ¥å®¹å™¨çµ„ä»¶
â”œâ”€â”€ contexts/
â”‚   â””â”€â”€ NotificationContext.tsx              # é€šçŸ¥ Context
â”œâ”€â”€ providers/
â”‚   â””â”€â”€ NotificationProvider.tsx             # é€šçŸ¥ Provider
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useNotification.ts                   # é€šçŸ¥ Hook
â”œâ”€â”€ styles/
â”‚   â””â”€â”€ animations.css                       # å‹•ç•«æ¨£å¼
â””â”€â”€ types/
    â””â”€â”€ notification.ts                      # é€šçŸ¥é¡å‹å®šç¾©
```

---

## ğŸ¨ è¨­è¨ˆè¦æ ¼

### å‡ç´šé€šçŸ¥è¨­è¨ˆ

```tsx
// è¦–è¦ºæ•ˆæœ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚         ğŸ‰ æ­å–œå‡ç´šï¼               â”‚
â”‚                                     â”‚
â”‚   LV1 åˆå…¥æ±Ÿæ¹– â†’ LV2 å¶„éœ²é ­è§’      â”‚
â”‚                                     â”‚
â”‚         ç²å¾—çå‹µï¼š                  â”‚
â”‚   â€¢ æ¯æ—¥ä¸Šå‚³é…é¡ +1                â”‚
â”‚   â€¢ æ¯æ—¥æŸ¥è©¢é…é¡ +2                â”‚
â”‚                                     â”‚
â”‚              [é—œé–‰]                 â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å‹³ç« è§£é–é€šçŸ¥è¨­è¨ˆ

```tsx
// è¦–è¦ºæ•ˆæœï¼ˆå³ä¸Šè§’ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ… è§£é–æ–°å‹³ç« ï¼         â”‚
â”‚                         â”‚
â”‚  [åœ–ç¤º] é¦–æ¬¡ä¸Šå‚³        â”‚
â”‚                         â”‚
â”‚  ä¸Šå‚³ç¬¬ä¸€ç­†å‚µå‹™è³‡æ–™     â”‚
â”‚                         â”‚
â”‚              [é—œé–‰]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ å¯¦ä½œé †åº

### ç¬¬ 1 æ­¥ï¼šå»ºç«‹åŸºç¤çµ„ä»¶ï¼ˆ2 å°æ™‚ï¼‰
1. å»ºç«‹ NotificationContext
2. å»ºç«‹ NotificationProvider
3. å»ºç«‹ useNotification Hook
4. å»ºç«‹ NotificationContainer

### ç¬¬ 2 æ­¥ï¼šå»ºç«‹é€šçŸ¥çµ„ä»¶ï¼ˆ2 å°æ™‚ï¼‰
1. å»ºç«‹ LevelUpNotification
2. å»ºç«‹ BadgeUnlockNotification
3. å¯¦ä½œåŸºæœ¬æ¨£å¼

### ç¬¬ 3 æ­¥ï¼šå¯¦ä½œå‹•ç•«ï¼ˆ1.5 å°æ™‚ï¼‰
1. å»ºç«‹ animations.css
2. å¯¦ä½œå‡ç´šå‹•ç•«
3. å¯¦ä½œå‹³ç« å‹•ç•«

### ç¬¬ 4 æ­¥ï¼šæ•´åˆåˆ°é é¢ï¼ˆ1.5 å°æ™‚ï¼‰
1. æ•´åˆåˆ° _app.tsxï¼ˆåŒ…è£ NotificationProviderï¼‰
2. æ•´åˆåˆ°ä¸Šå‚³é é¢
3. æ•´åˆåˆ°æŸ¥è©¢é é¢
4. æ•´åˆåˆ°ç™»å…¥é é¢

### ç¬¬ 5 æ­¥ï¼šæ¸¬è©¦èˆ‡å„ªåŒ–ï¼ˆ1.5 å°æ™‚ï¼‰
1. åŠŸèƒ½æ¸¬è©¦
2. è¦–è¦ºæ¸¬è©¦
3. æ•ˆèƒ½æ¸¬è©¦
4. Bug ä¿®æ­£

---

## ğŸ“ æŠ€è¡“ç´°ç¯€

### é€šçŸ¥ç‹€æ…‹ç®¡ç†

```typescript
interface Notification {
  id: string
  type: 'level_up' | 'badge_unlock'
  data: LevelUpData | BadgeUnlockData
  duration?: number
  onClose?: () => void
}

interface NotificationContextValue {
  notifications: Notification[]
  showLevelUp: (data: LevelUpData) => void
  showBadgeUnlock: (data: BadgeUnlockData) => void
  closeNotification: (id: string) => void
}
```

### å‹•ç•«é…ç½®

```typescript
const levelUpAnimation = {
  initial: { scale: 0, opacity: 0 },
  animate: { scale: 1, opacity: 1 },
  exit: { scale: 0, opacity: 0 },
  transition: { duration: 0.3, ease: 'easeOut' }
}

const badgeUnlockAnimation = {
  initial: { x: 400, opacity: 0 },
  animate: { x: 0, opacity: 1 },
  exit: { x: 400, opacity: 0 },
  transition: { duration: 0.3, ease: 'easeOut' }
}
```

---

## â±ï¸ æ™‚é–“åˆ†é…

| ä»»å‹™ | é ä¼°æ™‚é–“ | å„ªå…ˆç´š |
|------|---------|--------|
| å»ºç«‹åŸºç¤çµ„ä»¶ | 2 å°æ™‚ | é«˜ |
| å»ºç«‹é€šçŸ¥çµ„ä»¶ | 2 å°æ™‚ | é«˜ |
| å¯¦ä½œå‹•ç•«æ•ˆæœ | 1.5 å°æ™‚ | ä¸­ |
| æ•´åˆåˆ°é é¢ | 1.5 å°æ™‚ | é«˜ |
| æ¸¬è©¦èˆ‡å„ªåŒ– | 1.5 å°æ™‚ | é«˜ |
| **ç¸½è¨ˆ** | **8.5 å°æ™‚** | - |

---

## ğŸš€ æº–å‚™é–‹å§‹

**ç¢ºèªæ¸…å–®**ï¼š
- âœ… éšæ®µ G.2 å·²å®Œæˆä¸¦é€šéæ¸¬è©¦
- âœ… å¾Œç«¯ API æ­£å¸¸é‹ä½œ
- âœ… å‰ç«¯å°ˆæ¡ˆçµæ§‹äº†è§£
- âœ… è¨­è¨ˆè¦æ ¼ç¢ºèª

**ä¸‹ä¸€æ­¥**ï¼šé–‹å§‹å¯¦ä½œï¼

---

**æ–‡ä»¶çµæŸ**

