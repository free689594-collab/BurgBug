# 階段 G.5：會員等級顯示整合 - 實作計畫

**版本**：v1.0  
**日期**：2025-10-14  
**預估時間**：1 天（8 小時）

---

## 📋 任務概覽

### 主要目標
在前端各個頁面顯示會員的等級、稱號、活躍度點數等資訊，讓使用者隨時了解自己的等級狀態。

### 已完成的工作（階段 G.3）
- ✅ 通知系統（升級和勳章解鎖）
- ✅ API 回應包含 activity 資訊

### 待完成的工作（階段 G.5）
- ⏳ 建立等級顯示組件
- ⏳ 建立勳章顯示組件
- ⏳ 更新 MemberNav 組件
- ⏳ 建立會員資料頁面
- ⏳ 整合到各個頁面

---

## 🎯 詳細任務

### 任務 1：建立等級顯示組件（1.5 小時）

#### 1.1 建立 LevelBadge 組件
- **檔案**：`src/components/member/LevelBadge.tsx`
- **功能**：
  - 顯示等級數字（LV1-LV30）
  - 顯示稱號
  - 根據等級顯示不同顏色
  - 支援不同尺寸（small, medium, large）
  - 支援工具提示（顯示詳細資訊）

#### 1.2 設計規格
- **視覺效果**：
  - 圓形或徽章形狀
  - 漸變背景（根據等級顏色）
  - 光暈效果
  - 響應式設計

- **內容**：
  ```
  ┌─────────────┐
  │   LV 5      │
  │  初露鋒芒   │
  └─────────────┘
  ```

#### 1.3 技術實作
- 使用 Tailwind CSS
- 支援 hover 效果
- 支援點擊顯示詳細資訊

---

### 任務 2：建立活躍度進度條組件（1 小時）

#### 2.1 建立 ActivityProgress 組件
- **檔案**：`src/components/member/ActivityProgress.tsx`
- **功能**：
  - 顯示當前活躍度點數
  - 顯示下一等級所需點數
  - 顯示進度條
  - 顯示百分比

#### 2.2 設計規格
- **視覺效果**：
  ```
  活躍度：150 / 300 (50%)
  ████████████░░░░░░░░░░░░
  距離下一等級還需 150 點
  ```

---

### 任務 3：建立勳章展示組件（1.5 小時）

#### 3.1 建立 BadgeDisplay 組件
- **檔案**：`src/components/member/BadgeDisplay.tsx`
- **功能**：
  - 顯示已解鎖的勳章
  - 顯示勳章圖示和名稱
  - 支援網格佈局
  - 支援點擊查看詳細資訊
  - 顯示勳章總數

#### 3.2 設計規格
- **視覺效果**：
  ```
  我的勳章 (5/34)
  
  ┌───┐ ┌───┐ ┌───┐ ┌───┐ ┌───┐
  │ 🏅│ │ 🎖️│ │ 👑│ │ ⭐│ │ 🔥│
  └───┘ └───┘ └───┘ └───┘ └───┘
  首次  連續  等級  查詢  上傳
  上傳  登入  達人  高手  達人
  ```

---

### 任務 4：更新 MemberNav 組件（1.5 小時）

#### 4.1 修改 MemberNav
- **檔案**：`src/components/member/MemberNav.tsx`
- **新增功能**：
  - 顯示會員等級徽章
  - 顯示會員稱號
  - 顯示活躍度點數
  - 點擊可查看詳細資訊

#### 4.2 設計規格
- **位置**：導航欄右上角
- **內容**：
  ```
  ┌─────────────────────────┐
  │ [LV5 初露鋒芒] 小明      │
  │ 活躍度：150 點           │
  └─────────────────────────┘
  ```

---

### 任務 5：建立會員資料頁面（2 小時）

#### 5.1 建立會員資料頁面
- **檔案**：`src/app/profile/page.tsx`
- **功能**：
  - 顯示會員基本資料
  - 顯示等級和稱號
  - 顯示活躍度進度
  - 顯示已解鎖的勳章
  - 顯示活躍度歷史
  - 顯示配額資訊

#### 5.2 設計規格
- **區塊**：
  1. 個人資訊區（頭像、暱稱、等級、稱號）
  2. 活躍度區（當前點數、進度條、下一等級）
  3. 勳章區（已解鎖的勳章）
  4. 統計區（總上傳、總查詢、連續登入天數）
  5. 配額區（每日上傳配額、每日查詢配額）

---

### 任務 6：建立 API 端點（1 小時）

#### 6.1 建立會員資料 API
- **檔案**：`src/app/api/member/profile/route.ts`
- **功能**：
  - 取得會員基本資料
  - 取得會員統計資料
  - 取得會員等級資訊
  - 取得會員勳章列表

#### 6.2 回應格式
```json
{
  "success": true,
  "data": {
    "user": {
      "id": "...",
      "account": "member001",
      "nickname": "小明",
      "business_type": "當鋪",
      "business_region": "北北基宜"
    },
    "level": {
      "current_level": 5,
      "title": "初露鋒芒",
      "title_color": "#10B981",
      "activity_points": 150,
      "next_level_points": 300,
      "progress_percentage": 50
    },
    "badges": [
      {
        "badge_key": "first_upload",
        "badge_name": "首次上傳",
        "description": "上傳第一筆債務資料",
        "difficulty": "easy",
        "icon_name": "Upload",
        "unlocked_at": "2025-01-01T00:00:00Z"
      }
    ],
    "stats": {
      "total_uploads": 10,
      "total_queries": 20,
      "consecutive_login_days": 5,
      "total_badges": 5
    },
    "quotas": {
      "daily_upload_limit": 11,
      "daily_query_limit": 22,
      "remaining_uploads": 8,
      "remaining_queries": 15
    }
  }
}
```

---

### 任務 7：整合到儀表板頁面（1 小時）

#### 7.1 更新儀表板
- **檔案**：`src/app/dashboard/page.tsx`
- **新增**：
  - 等級卡片（顯示當前等級和進度）
  - 勳章卡片（顯示最近解鎖的勳章）
  - 快速連結到會員資料頁面

---

### 任務 8：測試與優化（1.5 小時）

#### 8.1 功能測試
- ✅ 等級顯示正確
- ✅ 稱號顯示正確
- ✅ 活躍度點數正確
- ✅ 進度條計算正確
- ✅ 勳章顯示正確
- ✅ API 回應正確

#### 8.2 視覺測試
- ✅ 在不同螢幕尺寸下顯示正常
- ✅ 在不同瀏覽器下顯示正常
- ✅ 顏色和字體正確
- ✅ 響應式設計正常

#### 8.3 效能測試
- ✅ 載入速度正常
- ✅ 不影響其他功能

---

## 📁 檔案結構

```
src/
├── components/
│   └── member/
│       ├── LevelBadge.tsx              # 等級徽章組件
│       ├── ActivityProgress.tsx        # 活躍度進度條組件
│       ├── BadgeDisplay.tsx            # 勳章展示組件
│       └── MemberNav.tsx               # 會員導航欄（更新）
├── app/
│   ├── profile/
│   │   └── page.tsx                    # 會員資料頁面
│   ├── dashboard/
│   │   └── page.tsx                    # 儀表板（更新）
│   └── api/
│       └── member/
│           └── profile/
│               └── route.ts            # 會員資料 API
└── types/
    └── member.ts                       # 會員類型定義（新增）
```

---

## 🎨 設計規格

### 等級徽章設計

```tsx
// 小尺寸（導航欄）
┌──────────┐
│ LV5      │
│ 初露鋒芒 │
└──────────┘

// 中尺寸（卡片）
┌────────────────┐
│    LV 5        │
│   初露鋒芒     │
│  150 / 300     │
└────────────────┘

// 大尺寸（個人資料頁）
┌──────────────────────┐
│       LV 5           │
│     初露鋒芒         │
│   活躍度：150 點     │
│  距離下一等級：150   │
└──────────────────────┘
```

### 勳章展示設計

```tsx
┌─────────────────────────────────────┐
│ 我的勳章 (5/34)                     │
│                                     │
│ ┌───┐ ┌───┐ ┌───┐ ┌───┐ ┌───┐    │
│ │🏅 │ │🎖️ │ │👑 │ │⭐ │ │🔥 │    │
│ └───┘ └───┘ └───┘ └───┘ └───┘    │
│ 首次  連續  等級  查詢  上傳       │
│ 上傳  登入  達人  高手  達人       │
│                                     │
│ [查看全部勳章]                      │
└─────────────────────────────────────┘
```

---

## 🔄 實作順序

### 第 1 步：建立基礎組件（2.5 小時）
1. 建立 LevelBadge 組件
2. 建立 ActivityProgress 組件
3. 建立 BadgeDisplay 組件

### 第 2 步：建立 API（1 小時）
1. 建立會員資料 API
2. 測試 API 回應

### 第 3 步：建立頁面（2 小時）
1. 建立會員資料頁面
2. 整合組件

### 第 4 步：更新現有組件（1.5 小時）
1. 更新 MemberNav
2. 更新儀表板

### 第 5 步：測試與優化（1.5 小時）
1. 功能測試
2. 視覺測試
3. 效能測試
4. Bug 修正

---

## ⏱️ 時間分配

| 任務 | 預估時間 | 優先級 |
|------|---------|--------|
| 建立等級顯示組件 | 1.5 小時 | 高 |
| 建立活躍度進度條組件 | 1 小時 | 高 |
| 建立勳章展示組件 | 1.5 小時 | 中 |
| 更新 MemberNav 組件 | 1.5 小時 | 高 |
| 建立會員資料頁面 | 2 小時 | 高 |
| 建立 API 端點 | 1 小時 | 高 |
| 整合到儀表板頁面 | 1 小時 | 中 |
| 測試與優化 | 1.5 小時 | 高 |
| **總計** | **11 小時** | - |

---

## 🚀 準備開始

**確認清單**：
- ✅ 階段 G.3 已完成
- ✅ 通知系統正常運作
- ✅ API 回應包含 activity 資訊
- ✅ 設計規格確認

**下一步**：開始實作！

---

**文件結束**

