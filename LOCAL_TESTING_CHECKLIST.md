# 本地測試檢查清單

## 📋 每次開發新功能前

### 1. 啟動開發環境
```bash
npm run dev
```
- [ ] 開發伺服器正常啟動（http://localhost:3000）
- [ ] 沒有編譯錯誤
- [ ] 沒有警告訊息

## 🧪 功能開發完成後

### 2. 功能測試
- [ ] 新功能正常運作
- [ ] 所有按鈕和連結可點擊
- [ ] 表單驗證正確
- [ ] 錯誤處理正常顯示
- [ ] 成功訊息正確顯示

### 3. 資料庫測試
- [ ] 新增資料成功
- [ ] 讀取資料正確
- [ ] 更新資料成功
- [ ] 刪除資料成功
- [ ] RLS 權限正確（無法存取他人資料）

### 4. 認證測試
- [ ] 登入功能正常
- [ ] 登出功能正常
- [ ] 權限控制正確（一般會員/管理員）
- [ ] Session 持久化正常

### 5. UI/UX 測試
- [ ] 桌面版顯示正常（1920x1080）
- [ ] 平板版顯示正常（768x1024）
- [ ] 手機版顯示正常（375x667）
- [ ] 深色主題正確
- [ ] 載入狀態顯示
- [ ] 錯誤狀態顯示

### 6. 程式碼品質檢查
```bash
# 檢查 TypeScript 錯誤
npm run check

# 檢查 ESLint 警告
npm run lint

# 測試生產構建
npm run test:build
```
- [ ] 沒有 TypeScript 錯誤
- [ ] 沒有 ESLint 警告
- [ ] 生產構建成功

### 7. 效能檢查
- [ ] 頁面載入速度正常（< 3 秒）
- [ ] 沒有記憶體洩漏
- [ ] 沒有無限迴圈
- [ ] API 請求次數合理

## 🚀 準備部署前

### 8. 最終檢查
```bash
# 完整測試
npm run test:local
```
- [ ] 生產模式運行正常
- [ ] 所有功能在生產模式下正常
- [ ] 環境變數設定正確
- [ ] 沒有 console.log（除了必要的）

### 9. Git 提交
```bash
git add .
git commit -m "feat: 描述新功能"
git push origin main
```
- [ ] Commit message 清楚描述變更
- [ ] 沒有提交不必要的檔案
- [ ] .env.local 沒有被提交

### 10. 部署決策
**問自己：**
- [ ] 這個變更重要到需要立即部署嗎？
- [ ] 是否可以等待累積更多功能再部署？
- [ ] 是否有資料庫遷移需要執行？
- [ ] 是否需要更新環境變數？

**如果以上都確認，才進行部署！**

## 💡 快速測試指令

```bash
# 完整測試流程（推薦）
npm run check && npm run test:build

# 快速檢查
npm run lint

# 測試生產構建
npm run test:local
```

## 🐛 常見問題

### 問題 1: 本地正常但部署後出錯
- 檢查環境變數是否在 Vercel 設定
- 檢查 Node.js 版本是否一致
- 檢查資料庫 migration 是否執行

### 問題 2: RLS 權限錯誤
- 在 Supabase Dashboard 檢查 RLS 政策
- 確認 service_role_key 只在伺服器端使用
- 測試不同角色的存取權限

### 問題 3: 樣式在生產環境不同
- 確認 Tailwind CSS 配置正確
- 檢查是否有動態類名（需要加入 safelist）
- 測試 `npm run build` 後的樣式

## 📊 部署頻率建議

- **開發階段**：每週 1-2 次（累積多個功能）
- **穩定階段**：每 2-4 週一次
- **緊急修復**：立即部署
- **小調整**：累積後再部署

---

**記住：本地測試越完整，部署後的問題就越少！**

