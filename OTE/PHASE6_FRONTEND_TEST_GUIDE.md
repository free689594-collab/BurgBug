# Phase 6 前端功能測試指南

## 🎯 測試目標
驗證 Phase 6 訂閱管理功能的前端介面是否正常運作。

---

## ✅ 開發伺服器狀態

**伺服器地址**：
- 本地：http://localhost:3000
- 網路：http://192.168.0.10:3000

**狀態**：✅ 已啟動並運行中

---

## 📋 測試清單

### 測試 1：會員端訂閱頁面

**測試頁面**：http://localhost:3000/subscription

#### 1.1 基本頁面載入
- [ ] 頁面正常載入，沒有錯誤
- [ ] 訂閱狀態摘要正確顯示
- [ ] 續費方案選擇區塊正確顯示

#### 1.2 訂閱歷史記錄功能
- [ ] 「訂閱歷史記錄」按鈕存在
- [ ] 點擊按鈕可以展開/收起歷史記錄
- [ ] 展開時有平滑的動畫效果
- [ ] 展開後頁面自動滾動到該區塊
- [ ] 如果有訂閱記錄，顯示最近 3 筆
- [ ] 如果沒有訂閱記錄，顯示「目前沒有訂閱歷史記錄」

**訂閱歷史記錄應顯示的資訊**：
- 訂閱類型（免費試用/VIP月費）
- 訂閱期間（開始日期～結束日期）
- 訂閱狀態（試用中/使用中/已過期）
- 付款金額（如果有）

#### 1.3 付款記錄功能
- [ ] 「付款記錄」按鈕存在
- [ ] 點擊按鈕可以展開/收起付款記錄
- [ ] 展開時有平滑的動畫效果
- [ ] 展開後頁面自動滾動到該區塊
- [ ] 如果有付款記錄，顯示最近 3 筆
- [ ] 如果沒有付款記錄，顯示「目前沒有付款記錄」

**付款記錄應顯示的資訊**：
- 付款時間
- 付款金額
- 付款方式（ATM/超商條碼/超商代碼）
- 付款狀態（待付款/已付款/付款失敗）
- 訂單編號

#### 1.4 優惠價提示
- [ ] 「立即訂閱 VIP」按鈕下方顯示優惠價提示
- [ ] 提示文字正確顯示：
  ```
  ※ 目前為平台初創上線初期，
  月費 NT$1,500 為暫定優惠價，
  後續將依功能擴充調整為標準月費。
  ```
- [ ] 文字樣式為淺色小字（text-[10px]）
- [ ] 下方顯示「使用綠界金流安全付款」

#### 1.5 響應式設計
- [ ] 在桌面瀏覽器正常顯示
- [ ] 在平板尺寸正常顯示
- [ ] 在手機尺寸正常顯示
- [ ] 所有按鈕和文字在不同尺寸下都清晰可讀

---

### 測試 2：管理員訂閱管理頁面

**測試頁面**：http://localhost:3000/admin/subscription-management

**前置條件**：需要使用管理員帳號登入

#### 2.1 基本頁面載入
- [ ] 頁面正常載入，沒有錯誤
- [ ] 頁面標題顯示「訂閱管理」
- [ ] 三個主要區塊都正確顯示：
  - 即將到期訂閱
  - 付款記錄查詢
  - （未來可能的）方案價格設定

#### 2.2 即將到期訂閱功能
- [ ] 「即將到期訂閱」區塊存在
- [ ] 天數閾值選擇器正常運作（1/3/7/14/30 天）
- [ ] 選擇不同天數後，列表自動更新
- [ ] 如果有即將到期的訂閱，正確顯示列表
- [ ] 如果沒有即將到期的訂閱，顯示「目前沒有即將到期的訂閱」

**即將到期訂閱列表應顯示的資訊**：
- 會員帳號
- 會員暱稱
- 訂閱方案
- 訂閱狀態
- 結束日期
- 剩餘天數

#### 2.3 延長訂閱功能
- [ ] 每個訂閱記錄旁有「延長訂閱」按鈕
- [ ] 點擊按鈕後彈出對話框
- [ ] 對話框包含：
  - 延長天數輸入框（1-100 天）
  - 管理員備註輸入框（選填）
  - 確認按鈕
  - 取消按鈕
- [ ] 輸入天數 < 1 或 > 100 時顯示錯誤提示
- [ ] 點擊確認後成功延長訂閱
- [ ] 延長成功後顯示成功訊息
- [ ] 延長成功後列表自動更新

#### 2.4 付款記錄查詢功能
- [ ] 「付款記錄查詢」區塊存在
- [ ] 篩選條件包含：
  - 付款狀態（全部/待付款/已付款/付款失敗）
  - 付款方式（全部/ATM/超商條碼/超商代碼）
  - 會員帳號搜尋
- [ ] 選擇篩選條件後，列表自動更新
- [ ] 如果有付款記錄，正確顯示列表
- [ ] 如果沒有付款記錄，顯示「目前沒有付款記錄」

**付款記錄列表應顯示的資訊**：
- 訂單編號
- 會員帳號
- 會員暱稱
- 付款金額
- 付款方式
- 付款狀態
- 付款時間
- 訂閱方案

#### 2.5 分頁功能
- [ ] 如果付款記錄超過 20 筆，顯示分頁控制
- [ ] 「上一頁」按鈕在第一頁時禁用
- [ ] 「下一頁」按鈕在最後一頁時禁用
- [ ] 點擊分頁按鈕後，列表正確更新
- [ ] 顯示當前頁數和總頁數

#### 2.6 權限驗證
- [ ] 使用非管理員帳號訪問時，顯示「無權限訪問」
- [ ] 使用管理員帳號訪問時，正常顯示頁面

---

## 🧪 測試場景

### 場景 1：新會員（無訂閱記錄）

**預期結果**：
- 訂閱歷史記錄：顯示「目前沒有訂閱歷史記錄」
- 付款記錄：顯示「目前沒有付款記錄」
- 優惠價提示：正常顯示

### 場景 2：試用會員（有免費試用訂閱）

**預期結果**：
- 訂閱歷史記錄：顯示 1 筆免費試用記錄
- 付款記錄：顯示「目前沒有付款記錄」
- 訂閱狀態：顯示「試用中」

### 場景 3：VIP 會員（有付費訂閱）

**預期結果**：
- 訂閱歷史記錄：顯示最近 3 筆訂閱記錄
- 付款記錄：顯示最近 3 筆付款記錄
- 訂閱狀態：顯示「使用中」

### 場景 4：過期會員（訂閱已過期）

**預期結果**：
- 訂閱歷史記錄：顯示過期的訂閱記錄
- 訂閱狀態：顯示「已過期」
- 續費提示：顯示續費方案

---

## 🐛 常見問題排查

### 問題 1：頁面載入時出現錯誤

**可能原因**：
- API 端點無法訪問
- 資料庫連接失敗
- 權限不足

**排查步驟**：
1. 檢查瀏覽器控制台（F12）的錯誤訊息
2. 檢查網路請求（Network 標籤）
3. 確認已登入且有正確的權限

### 問題 2：訂閱歷史/付款記錄無法展開

**可能原因**：
- JavaScript 錯誤
- 狀態管理問題

**排查步驟**：
1. 檢查瀏覽器控制台的錯誤訊息
2. 重新整理頁面
3. 清除瀏覽器快取

### 問題 3：管理員頁面顯示「無權限訪問」

**可能原因**：
- 使用的不是管理員帳號
- 權限驗證失敗

**排查步驟**：
1. 確認使用的是管理員帳號
2. 檢查 members 表中的 role 欄位
3. 重新登入

### 問題 4：資料無法載入

**可能原因**：
- 資料庫中沒有資料
- API 查詢失敗

**排查步驟**：
1. 檢查瀏覽器控制台的網路請求
2. 確認資料庫中有測試資料
3. 檢查 API 回應內容

---

## 📊 測試結果記錄

### 會員端訂閱頁面
- [ ] 基本頁面載入：通過 / 失敗
- [ ] 訂閱歷史記錄：通過 / 失敗
- [ ] 付款記錄：通過 / 失敗
- [ ] 優惠價提示：通過 / 失敗
- [ ] 響應式設計：通過 / 失敗

### 管理員訂閱管理頁面
- [ ] 基本頁面載入：通過 / 失敗
- [ ] 即將到期訂閱：通過 / 失敗
- [ ] 延長訂閱功能：通過 / 失敗
- [ ] 付款記錄查詢：通過 / 失敗
- [ ] 分頁功能：通過 / 失敗
- [ ] 權限驗證：通過 / 失敗

---

## 💡 測試建議

1. **使用不同的瀏覽器測試**
   - Chrome
   - Firefox
   - Edge
   - Safari（如果有 Mac）

2. **測試不同的螢幕尺寸**
   - 桌面（1920x1080）
   - 平板（768x1024）
   - 手機（375x667）

3. **測試不同的使用者角色**
   - 新會員
   - 試用會員
   - VIP 會員
   - 管理員

4. **測試邊界情況**
   - 沒有資料時的顯示
   - 資料很多時的分頁
   - 網路緩慢時的載入狀態

---

## ✅ 測試完成檢查清單

- [ ] 所有會員端功能測試通過
- [ ] 所有管理員端功能測試通過
- [ ] 響應式設計在所有尺寸下正常
- [ ] 沒有 JavaScript 錯誤
- [ ] 沒有 API 錯誤
- [ ] 使用者體驗流暢
- [ ] 所有文字和提示正確顯示

---

## 📝 備註

### 關於測試資料
- 如果資料庫中沒有訂閱和付款資料，可以手動新增測試資料
- 或等待實際使用時產生資料

### 關於優惠價提示
- 優惠價提示文字已按照你的要求設定
- 位置在「立即訂閱 VIP」按鈕下方
- 使用淺色小字（text-[10px]）

### 關於管理員功能
- 延長訂閱天數限制：1-100 天
- 管理員備註為選填
- 付款記錄支援多維度篩選和分頁

---

## 🚀 測試完成後

如果所有測試都通過，Phase 6 就完全完成了！

**下一步選項**：
1. 部署到 Vercel
2. 繼續 Phase 7（報表與分析）
3. 優化現有功能
4. 建立更多測試資料

