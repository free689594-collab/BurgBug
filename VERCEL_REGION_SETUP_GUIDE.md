# Vercel Pro å€åŸŸè¨­å®šæŒ‡å—ï¼ˆå°ç£ä½¿ç”¨è€…ï¼‰

**ç›®æ¨™**ï¼šå°‡ Serverless Functions å¾ç¾åœ‹ï¼ˆiad1ï¼‰é·ç§»åˆ°é¦™æ¸¯ï¼ˆhkg1ï¼‰  
**é æœŸæ”¹å–„**ï¼šAPI å›æ‡‰æ™‚é–“ -60-75%  
**é©ç”¨æ–¹æ¡ˆ**ï¼šVercel Pro

---

## ğŸŒ ç‚ºä»€éº¼é¸æ“‡é¦™æ¸¯ï¼ˆhkg1ï¼‰ï¼Ÿ

### å€åŸŸé¸æ“‡åˆ†æ

| å€åŸŸä»£ç¢¼ | ä½ç½® | åˆ°å°ç£å»¶é² | åˆ° Supabase (å°åº¦) å»¶é² | ç¸½è©• |
|---------|------|-----------|---------------------|------|
| **hkg1** | é¦™æ¸¯ | **5-15ms** â­â­â­ | 60-100ms | âœ… **æœ€ä½³é¸æ“‡** |
| **sin1** | æ–°åŠ å¡ | 40-60ms | 40-80ms â­â­â­ | âœ… æ¬¡ä½³é¸æ“‡ |
| **nrt1** | æ±äº¬ | 30-50ms | 80-120ms | âš ï¸ å¯è€ƒæ…® |
| **iad1** | ç¾åœ‹ç¶­å‰å°¼äº | 180-220ms | 200-300ms | âŒ ç›®å‰ç‹€æ³ |

### æ¨è–¦ï¼šé¦™æ¸¯ï¼ˆhkg1ï¼‰

**ç†ç”±**ï¼š
1. âœ… **è·é›¢å°ç£æœ€è¿‘**ï¼ˆç´„ 800 å…¬é‡Œï¼‰
2. âœ… åˆ°å°ç£å»¶é²æ¥µä½ï¼ˆ5-15msï¼‰
3. âœ… åˆ°å°åº¦ Supabase å»¶é²å¯æ¥å—ï¼ˆ60-100msï¼‰
4. âœ… æœ€é©åˆå°ç£ä½¿ç”¨è€…

**å‚™é¸ï¼šæ–°åŠ å¡ï¼ˆsin1ï¼‰**
- å¦‚æœä½ çš„ä½¿ç”¨è€…åˆ†å¸ƒåœ¨æ•´å€‹æ±å—äº
- åˆ° Supabase å»¶é²æœ€ä½ï¼ˆ40-80msï¼‰

---

## ğŸš€ è¨­å®šæ­¥é©Ÿ

### æ­¥é©Ÿ 1ï¼šä¿®æ”¹ vercel.jsonï¼ˆå·²å®Œæˆï¼‰

æˆ‘å·²ç¶“å¹«ä½ ä¿®æ”¹äº† `vercel.json`ï¼š

```json
{
  "functions": {
    "src/app/api/**/*.ts": {
      "maxDuration": 10,
      "regions": ["hkg1"]
    }
  },
  "headers": [
    {
      "source": "/api/(.*)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "no-store, must-revalidate"
        }
      ]
    },
    {
      "source": "/(.*)",
      "headers": [
        {
          "key": "X-Content-Type-Options",
          "value": "nosniff"
        },
        {
          "key": "X-Frame-Options",
          "value": "DENY"
        },
        {
          "key": "X-XSS-Protection",
          "value": "1; mode=block"
        }
      ]
    }
  ]
}
```

**è®Šæ›´**ï¼š
- `"regions": ["sin1"]` â†’ `"regions": ["hkg1"]`

---

### æ­¥é©Ÿ 2ï¼šæäº¤ä¸¦æ¨é€åˆ° GitHub

```bash
# 1. æª¢æŸ¥è®Šæ›´
git status

# 2. æ·»åŠ è®Šæ›´
git add vercel.json

# 3. æäº¤
git commit -m "feat: å°‡ Serverless Functions å€åŸŸæ”¹ç‚ºé¦™æ¸¯ (hkg1)"

# 4. æ¨é€åˆ° GitHub
git push origin main
```

---

### æ­¥é©Ÿ 3ï¼šç­‰å¾… Vercel è‡ªå‹•éƒ¨ç½²

1. æ¨é€å¾Œï¼ŒVercel æœƒè‡ªå‹•åµæ¸¬åˆ°è®Šæ›´
2. å‰å¾€ Vercel Dashboardï¼šhttps://vercel.com/kuan-yus-projects/burg-bug
3. æŸ¥çœ‹éƒ¨ç½²é€²åº¦ï¼ˆé€šå¸¸ 2-5 åˆ†é˜ï¼‰
4. ç­‰å¾…éƒ¨ç½²å®Œæˆ

---

### æ­¥é©Ÿ 4ï¼šé©—è­‰å€åŸŸè¨­å®š

éƒ¨ç½²å®Œæˆå¾Œï¼Œé©—è­‰ Serverless Functions æ˜¯å¦åœ¨é¦™æ¸¯ï¼š

#### æ–¹æ³• 1ï¼šä½¿ç”¨ Vercel CLI

```bash
# å®‰è£ Vercel CLIï¼ˆå¦‚æœé‚„æ²’å®‰è£ï¼‰
npm install -g vercel

# ç™»å…¥
vercel login

# æª¢æŸ¥æœ€æ–°éƒ¨ç½²
vercel ls

# æŸ¥çœ‹éƒ¨ç½²è©³æƒ…
vercel inspect https://burg-bug.vercel.app
```

åœ¨è¼¸å‡ºä¸­æ‰¾åˆ° `regions` æ¬„ä½ï¼Œæ‡‰è©²é¡¯ç¤º `["hkg1"]`ã€‚

#### æ–¹æ³• 2ï¼šä½¿ç”¨ Vercel Dashboard

1. å‰å¾€ï¼šhttps://vercel.com/kuan-yus-projects/burg-bug/deployments
2. é»æ“Šæœ€æ–°çš„éƒ¨ç½²
3. æŸ¥çœ‹ã€ŒDeployment Detailsã€
4. æ‰¾åˆ°ã€ŒRegionsã€æ¬„ä½ï¼Œæ‡‰è©²é¡¯ç¤º `hkg1`

---

### æ­¥é©Ÿ 5ï¼šæ¸¬è©¦æ•ˆèƒ½æ”¹å–„

#### æ¸¬è©¦ 1ï¼šä½¿ç”¨ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·

1. é–‹å•Ÿ https://burg-bug.vercel.app
2. æŒ‰ F12 é–‹å•Ÿé–‹ç™¼è€…å·¥å…·
3. åˆ‡æ›åˆ°ã€ŒNetworkã€æ¨™ç±¤
4. æ¸…é™¤è¨˜éŒ„ï¼ˆåƒåœ¾æ¡¶åœ–ç¤ºï¼‰
5. åŸ·è¡Œä»¥ä¸‹æ“ä½œä¸¦è¨˜éŒ„æ™‚é–“ï¼š

**ç™»å…¥æ¸¬è©¦**ï¼š
- ç™»å…¥ä¸€å€‹æ¸¬è©¦å¸³è™Ÿ
- è¨˜éŒ„ `/api/auth/login` çš„å›æ‡‰æ™‚é–“
- **ç›®æ¨™**ï¼š< 1.5 ç§’

**æŸ¥è©¢æ¸¬è©¦**ï¼š
- æŸ¥è©¢ä¸€ç­†å‚µå‹™è¨˜éŒ„
- è¨˜éŒ„ `/api/debts/search` çš„å›æ‡‰æ™‚é–“
- **ç›®æ¨™**ï¼š< 2 ç§’

**ä¸Šå‚³æ¸¬è©¦**ï¼š
- ä¸Šå‚³ä¸€ç­†å‚µå‹™è¨˜éŒ„
- è¨˜éŒ„ `/api/debts/upload` çš„å›æ‡‰æ™‚é–“
- **ç›®æ¨™**ï¼š< 1.5 ç§’

#### æ¸¬è©¦ 2ï¼šä½¿ç”¨ curl æ¸¬è©¦ API å»¶é²

```bash
# æ¸¬è©¦å¥åº·æª¢æŸ¥ API
curl -w "\nTime: %{time_total}s\n" https://burg-bug.vercel.app/api/health

# é æœŸå›æ‡‰æ™‚é–“ï¼š< 0.5 ç§’
```

---

## ğŸ“Š é æœŸæ•ˆèƒ½æ”¹å–„

### æ”¹å–„å‰ï¼ˆç¾åœ‹ iad1ï¼‰

| æ“ä½œ | ç¶²è·¯å»¶é² | ç¨‹å¼ç¢¼åŸ·è¡Œ | ç¸½æ™‚é–“ |
|-----|---------|-----------|--------|
| **ç™»å…¥** | 2-3 ç§’ | 0.5 ç§’ | **2.5-3.5 ç§’** |
| **æŸ¥è©¢** | 2-3 ç§’ | 0.5 ç§’ | **2.5-3.5 ç§’** |
| **ä¸Šå‚³** | 2-3 ç§’ | 0.5 ç§’ | **2.5-3.5 ç§’** |

### æ”¹å–„å¾Œï¼ˆé¦™æ¸¯ hkg1ï¼‰

| æ“ä½œ | ç¶²è·¯å»¶é² | ç¨‹å¼ç¢¼åŸ·è¡Œ | ç¸½æ™‚é–“ | æ”¹å–„ |
|-----|---------|-----------|--------|------|
| **ç™»å…¥** | 0.6-1 ç§’ | 0.5 ç§’ | **1.1-1.5 ç§’** | **-60%** âœ… |
| **æŸ¥è©¢** | 0.6-1 ç§’ | 0.5 ç§’ | **1.1-1.5 ç§’** | **-60%** âœ… |
| **ä¸Šå‚³** | 0.6-1 ç§’ | 0.5 ç§’ | **1.1-1.5 ç§’** | **-60%** âœ… |

---

## ğŸ”§ é€²éšå„ªåŒ–ï¼ˆå¯é¸ï¼‰

### å„ªåŒ– 1ï¼šä½¿ç”¨å¤šå€åŸŸéƒ¨ç½²

å¦‚æœä½ çš„ä½¿ç”¨è€…åˆ†å¸ƒåœ¨å¤šå€‹åœ°å€ï¼Œå¯ä»¥è¨­å®šå¤šå€‹å€åŸŸï¼š

```json
{
  "functions": {
    "src/app/api/**/*.ts": {
      "maxDuration": 10,
      "regions": ["hkg1", "sin1", "nrt1"]
    }
  }
}
```

**å„ªé»**ï¼š
- Vercel æœƒè‡ªå‹•å°‡è«‹æ±‚è·¯ç”±åˆ°æœ€è¿‘çš„å€åŸŸ
- æä¾›æ›´å¥½çš„å…¨çƒè¦†è“‹

**ç¼ºé»**ï¼š
- æˆæœ¬è¼ƒé«˜ï¼ˆPro æ–¹æ¡ˆæŒ‰åŸ·è¡Œæ™‚é–“è¨ˆè²»ï¼‰

---

### å„ªåŒ– 2ï¼šè¨­å®š Edge Configï¼ˆéœæ…‹è³‡æ–™ï¼‰

å°æ–¼ä¸å¸¸è®Šå‹•çš„è³‡æ–™ï¼ˆä¾‹å¦‚ï¼šç­‰ç´šé…ç½®ã€å‹³ç« é…ç½®ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ Vercel Edge Configï¼š

```typescript
// src/app/api/config/levels/route.ts
import { get } from '@vercel/edge-config'

export const runtime = 'edge' // ä½¿ç”¨ Edge Runtime

export async function GET() {
  const levels = await get('levels')
  return NextResponse.json(levels)
}
```

**å„ªé»**ï¼š
- å…¨çƒ CDN å¿«å–
- å›æ‡‰æ™‚é–“ < 50ms
- ç„¡éœ€æŸ¥è©¢è³‡æ–™åº«

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè­°

### ç«‹å³åŸ·è¡Œ

1. âœ… **æäº¤ä¸¦æ¨é€ vercel.json**
2. âœ… **ç­‰å¾…éƒ¨ç½²å®Œæˆ**
3. âœ… **é©—è­‰å€åŸŸè¨­å®š**
4. âœ… **æ¸¬è©¦æ•ˆèƒ½æ”¹å–„**

### çŸ­æœŸå„ªåŒ–ï¼ˆ1-2 é€±å…§ï¼‰

5. ğŸ”§ **å»ºç«‹è³‡æ–™åº« VIEW**ï¼ˆé€²ä¸€æ­¥æ¸›å°‘æŸ¥è©¢æ¬¡æ•¸ï¼‰
6. ğŸ”§ **è¨­å®š UptimeRobot**ï¼ˆé˜²æ­¢å†·å•Ÿå‹•ï¼‰
7. ğŸ”§ **å‰ç«¯ç¨‹å¼ç¢¼åˆ†å‰²**

### é•·æœŸå„ªåŒ–ï¼ˆå¯é¸ï¼‰

8. ğŸ”§ **ä½¿ç”¨ Redis å¿«å–**
9. ğŸ”§ **ä½¿ç”¨ Edge Config**
10. ğŸ”§ **åœ–ç‰‡ CDN å„ªåŒ–**

---

## â“ å¸¸è¦‹å•é¡Œ

### Q1: ç‚ºä»€éº¼ä¸é¸æ“‡æ–°åŠ å¡ï¼ˆsin1ï¼‰ï¼Ÿ

**A**: 
- é¦™æ¸¯è·é›¢å°ç£æ›´è¿‘ï¼ˆ800 å…¬é‡Œ vs 3,300 å…¬é‡Œï¼‰
- åˆ°å°ç£å»¶é²æ›´ä½ï¼ˆ5-15ms vs 40-60msï¼‰
- å¦‚æœä½ çš„ä¸»è¦ä½¿ç”¨è€…åœ¨å°ç£ï¼Œé¦™æ¸¯æ˜¯æœ€ä½³é¸æ“‡

### Q2: æ”¹å€åŸŸå¾Œéœ€è¦é‡æ–°è¨­å®šç’°å¢ƒè®Šæ•¸å—ï¼Ÿ

**A**: 
- ä¸éœ€è¦
- ç’°å¢ƒè®Šæ•¸æ˜¯å°ˆæ¡ˆå±¤ç´šçš„è¨­å®šï¼Œä¸å—å€åŸŸå½±éŸ¿

### Q3: æ”¹å€åŸŸå¾Œæœƒå½±éŸ¿ç¾æœ‰è³‡æ–™å—ï¼Ÿ

**A**: 
- ä¸æœƒ
- Serverless Functions åªæ˜¯åŸ·è¡Œç¨‹å¼ç¢¼çš„åœ°æ–¹
- è³‡æ–™ä»ç„¶å„²å­˜åœ¨ Supabaseï¼ˆå°åº¦ï¼‰

### Q4: éƒ¨ç½²åˆ°é¦™æ¸¯å¾Œï¼Œå…¶ä»–åœ°å€çš„ä½¿ç”¨è€…æœƒè®Šæ…¢å—ï¼Ÿ

**A**: 
- å°ç£ä½¿ç”¨è€…ï¼šæ›´å¿«ï¼ˆ-60%ï¼‰
- æ±å—äºä½¿ç”¨è€…ï¼šå·®ä¸å¤šæˆ–ç¨å¿«
- æ­ç¾ä½¿ç”¨è€…ï¼šå¯èƒ½ç¨æ…¢ï¼ˆä½†ä½ çš„ä¸»è¦ä½¿ç”¨è€…æ‡‰è©²åœ¨äºæ´²ï¼‰

### Q5: å¯ä»¥éš¨æ™‚æ”¹å›æ–°åŠ å¡æˆ–å…¶ä»–å€åŸŸå—ï¼Ÿ

**A**: 
- å¯ä»¥
- åªéœ€ä¿®æ”¹ `vercel.json` ä¸­çš„ `regions`
- é‡æ–°éƒ¨ç½²å³å¯

---

## ğŸ“ éœ€è¦å”åŠ©ï¼Ÿ

å¦‚æœåœ¨è¨­å®šéç¨‹ä¸­é‡åˆ°å•é¡Œï¼š

1. **éƒ¨ç½²å¤±æ•—**ï¼š
   - æª¢æŸ¥ Vercel Dashboard çš„ Build Logs
   - ç¢ºèª `vercel.json` èªæ³•æ­£ç¢º

2. **å€åŸŸæ²’æœ‰æ”¹è®Š**ï¼š
   - ç¢ºèªå·²æ¨é€åˆ° GitHub
   - ç¢ºèª Vercel å·²è‡ªå‹•éƒ¨ç½²
   - ä½¿ç”¨ `vercel inspect` æª¢æŸ¥

3. **æ•ˆèƒ½æ²’æœ‰æ”¹å–„**ï¼š
   - æ¸…é™¤ç€è¦½å™¨å¿«å–
   - ä½¿ç”¨ç„¡ç—•æ¨¡å¼æ¸¬è©¦
   - æª¢æŸ¥æ˜¯å¦æœ‰å…¶ä»–ç“¶é ¸ï¼ˆè³‡æ–™åº«æŸ¥è©¢æ¬¡æ•¸ï¼‰

éš¨æ™‚å‘Šè¨´æˆ‘ä½ çš„æ¸¬è©¦çµæœï¼

---

**æŒ‡å—ç”Ÿæˆæ™‚é–“**ï¼š2025-11-03  
**ç›®æ¨™å€åŸŸ**ï¼šé¦™æ¸¯ï¼ˆhkg1ï¼‰  
**é æœŸæ”¹å–„**ï¼š-60-75% API å›æ‡‰æ™‚é–“

